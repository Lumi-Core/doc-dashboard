/* ============================================
   AI Document Management Dashboard - Styles
   Exact same design system as Social Media Agent
   ============================================ */

/* CSS Variables */
:root {
    --primary: #dc2626;
    --primary-dark: #991b1b;
    --primary-light: #ef4444;
    --secondary: #64748b;
    --success: #22c55e;
    --success-dark: #16a34a;
    --warning: #f59e0b;
    --warning-dark: #d97706;
    --danger: #ef4444;
    --danger-dark: #dc2626;
    --info: #06b6d4;
    --info-dark: #0891b2;
    --white: #ffffff;
    --gray-50: #f8fafc;
    --gray-100: #f1f5f9;
    --gray-200: #e2e8f0;
    --gray-300: #cbd5e1;
    --gray-400: #94a3b8;
    --gray-500: #64748b;
    --gray-600: #475569;
    --gray-700: #334155;
    --gray-800: #1e293b;
    --gray-900: #0f172a;
    --sidebar-width: 260px;
    --sidebar-collapsed: 70px;
    --header-height: 70px;
    --border-radius: 12px;
    --border-radius-sm: 8px;
    --border-radius-lg: 16px;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    --transition-fast: 150ms ease;
    --transition: 200ms ease;
    --transition-slow: 300ms ease;
}

/* Reset & Base */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 14px; scroll-behavior: smooth; }
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--gray-100);
    color: var(--gray-800);
    line-height: 1.6;
    overflow-x: hidden;
}
a { text-decoration: none; color: inherit; }
ul, ol { list-style: none; }
img { max-width: 100%; height: auto; }
button { cursor: pointer; font-family: inherit; }
input, select, textarea { font-family: inherit; }

/* ============================================
   Sidebar
   ============================================ */
.sidebar {
    position: fixed; top: 0; left: 0;
    width: var(--sidebar-width); height: 100vh;
    background: var(--gray-900); color: var(--white);
    display: flex; flex-direction: column;
    z-index: 1000; transition: width var(--transition-slow);
}
.sidebar.collapsed { width: var(--sidebar-collapsed); }
.sidebar-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px; border-bottom: 1px solid var(--gray-700);
}
.logo { display: flex; align-items: center; gap: 12px; font-size: 1.25rem; font-weight: 700; }
.logo i { font-size: 1.5rem; color: var(--primary); }
.sidebar.collapsed .logo span { display: none; }
.sidebar-toggle {
    background: transparent; border: none; color: var(--gray-400);
    font-size: 1.25rem; padding: 8px; border-radius: var(--border-radius-sm);
    transition: var(--transition);
}
.sidebar-toggle:hover { background: var(--gray-800); color: var(--white); }
.sidebar-menu { flex: 1; overflow-y: auto; padding: 20px 0; }
.nav-list { display: flex; flex-direction: column; gap: 4px; }
.nav-item a {
    display: flex; align-items: center; gap: 12px; padding: 12px 20px;
    color: var(--gray-400); transition: var(--transition);
    border-left: 3px solid transparent;
}
.nav-item a:hover { background: var(--gray-800); color: var(--white); }
.nav-item.active a {
    background: rgba(220, 38, 38, 0.15);
    color: var(--primary-light); border-left-color: var(--primary);
}
.nav-item i { font-size: 1.1rem; width: 24px; text-align: center; }
.sidebar.collapsed .nav-item span { display: none; }
.sidebar-footer { padding: 20px; border-top: 1px solid var(--gray-700); }
.health-indicator {
    display: flex; align-items: center; gap: 10px; padding: 12px;
    background: var(--gray-800); border-radius: var(--border-radius-sm);
}
.status-dot {
    width: 10px; height: 10px; border-radius: 50%;
    background: var(--gray-500); animation: pulse 2s infinite;
}
.status-dot.healthy { background: var(--success); }
.status-dot.unhealthy { background: var(--danger); }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
.sidebar.collapsed .status-text { display: none; }

/* ============================================
   Main Content
   ============================================ */
.main-content {
    margin-left: var(--sidebar-width); min-height: 100vh;
    transition: margin-left var(--transition-slow);
}
.sidebar.collapsed + .main-content { margin-left: var(--sidebar-collapsed); }

/* Top Header */
.top-header {
    position: sticky; top: 0; background: var(--white);
    height: var(--header-height); display: flex; align-items: center;
    justify-content: space-between; padding: 0 30px;
    box-shadow: var(--shadow); z-index: 100;
}
.header-left { display: flex; align-items: center; gap: 12px; }
.header-left h1 { font-size: 1.5rem; font-weight: 700; color: var(--gray-900); }
.breadcrumb { font-size: 0.85rem; color: var(--gray-500); }
.header-right { display: flex; align-items: center; gap: 16px; }
.search-box { position: relative; }
.search-box i { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--gray-400); }
.search-box input {
    padding: 10px 14px 10px 40px; border: 1px solid var(--gray-200);
    border-radius: var(--border-radius); width: 250px; transition: var(--transition);
}
.search-box input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(220,38,38,0.15); }
.user-menu {
    display: flex; align-items: center; gap: 10px; padding: 8px 12px;
    border-radius: var(--border-radius); cursor: pointer; transition: var(--transition);
}
.user-menu:hover { background: var(--gray-100); }
.avatar { width: 36px; height: 36px; border-radius: 50%; }
.notification-badge {
    position: absolute; top: -5px; right: -5px; background: var(--danger);
    color: var(--white); font-size: 0.7rem; padding: 2px 6px;
    border-radius: 10px; font-weight: 600;
}

/* Page Content */
.page-content { padding: 30px; }
.page { animation: fadeIn var(--transition); }
.page.hidden { display: none; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* ============================================
   Stats Cards
   ============================================ */
.stats-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px; margin-bottom: 30px;
}
.stat-card {
    background: var(--white); border-radius: var(--border-radius-lg);
    padding: 24px; display: flex; align-items: center; gap: 20px;
    box-shadow: var(--shadow); transition: var(--transition);
}
.stat-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.stat-icon {
    width: 60px; height: 60px; border-radius: var(--border-radius);
    display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
}
.stat-icon.red { background: rgba(220, 38, 38, 0.15); color: var(--primary); }
.stat-icon.green { background: rgba(34, 197, 94, 0.15); color: var(--success); }
.stat-icon.orange { background: rgba(245, 158, 11, 0.15); color: var(--warning); }
.stat-icon.purple { background: rgba(168, 85, 247, 0.15); color: #a855f7; }
.stat-info h3 { font-size: 1.75rem; font-weight: 700; color: var(--gray-900); }
.stat-info p { color: var(--gray-500); font-size: 0.9rem; }
.stat-trend { margin-left: auto; display: flex; align-items: center; gap: 6px; font-size: 0.85rem; color: var(--gray-500); }
.stat-trend.up { color: var(--success); }
.stat-trend.down { color: var(--danger); }

/* ============================================
   Cards
   ============================================ */
.card {
    background: var(--white); border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow); overflow: hidden;
}
.card-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px 24px; border-bottom: 1px solid var(--gray-100);
}
.card-header h3 { font-size: 1.1rem; font-weight: 600; color: var(--gray-900); }
.chart-card { background: var(--white); border-radius: var(--border-radius-lg); box-shadow: var(--shadow); padding: 24px; }
.charts-row { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; margin-bottom: 30px; }
.chart-card.wide { grid-column: span 1; }

/* Health Grid */
.health-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-top: 20px; }
.health-item {
    display: flex; align-items: center; gap: 12px; padding: 16px;
    background: var(--gray-50); border-radius: var(--border-radius); transition: var(--transition);
}
.health-item.healthy { border-left: 3px solid var(--success); }
.health-item.unhealthy { border-left: 3px solid var(--danger); background: rgba(239, 68, 68, 0.05); }
.health-item i { font-size: 1.25rem; }
.health-item.healthy i { color: var(--success); }
.health-item.unhealthy i { color: var(--danger); }
.health-item-info h4 { font-size: 0.9rem; font-weight: 600; color: var(--gray-800); }
.health-item-info p { font-size: 0.75rem; color: var(--gray-500); }

/* Quick Actions */
.quick-actions { display: flex; flex-direction: column; gap: 12px; }
.action-btn {
    display: flex; align-items: center; gap: 12px; padding: 14px 20px;
    background: var(--gray-50); border: 1px solid var(--gray-200);
    border-radius: var(--border-radius); font-size: 0.95rem; font-weight: 500;
    color: var(--gray-700); transition: var(--transition);
}
.action-btn:hover { background: var(--primary); border-color: var(--primary); color: var(--white); }
.action-btn i { font-size: 1.1rem; }

/* Activity Section */
.activity-section { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.today-posts { padding: 24px; max-height: 300px; overflow-y: auto; }
.post-item {
    display: flex; align-items: center; gap: 14px; padding: 14px;
    background: var(--gray-50); border-radius: var(--border-radius); margin-bottom: 12px;
}
.post-item:last-child { margin-bottom: 0; }
.post-icon {
    width: 40px; height: 40px; background: var(--primary); color: var(--white);
    border-radius: var(--border-radius-sm); display: flex; align-items: center; justify-content: center;
}
.post-info h4 { font-size: 0.95rem; font-weight: 600; color: var(--gray-800); }
.post-info p { font-size: 0.8rem; color: var(--gray-500); }
.post-status {
    margin-left: auto; padding: 4px 12px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 600; text-transform: uppercase;
}
.post-status.pending { background: rgba(245, 158, 11, 0.15); color: var(--warning-dark); }
.post-status.posted, .post-status.active { background: rgba(34, 197, 94, 0.15); color: var(--success-dark); }
.post-status.scheduled, .post-status.expiring { background: rgba(220, 38, 38, 0.15); color: var(--primary); }
.post-status.overdue, .post-status.expired { background: rgba(239, 68, 68, 0.15); color: var(--danger); }

/* ============================================
   Buttons
   ============================================ */
.btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 8px;
    padding: 10px 20px; border-radius: var(--border-radius-sm); font-weight: 500;
    font-size: 0.95rem; border: none; transition: var(--transition);
}
.btn:disabled { opacity: 0.6; cursor: not-allowed; }
.btn-primary { background: var(--primary); color: var(--white); }
.btn-primary:hover:not(:disabled) { background: var(--primary-dark); }
.btn-secondary { background: var(--gray-200); color: var(--gray-700); }
.btn-secondary:hover:not(:disabled) { background: var(--gray-300); }
.btn-success { background: var(--success); color: var(--white); }
.btn-success:hover:not(:disabled) { background: var(--success-dark); }
.btn-danger { background: var(--danger); color: var(--white); }
.btn-danger:hover:not(:disabled) { background: var(--danger-dark); }
.btn-info { background: var(--info); color: var(--white); }
.btn-info:hover:not(:disabled) { background: var(--info-dark); }
.btn-sm { padding: 6px 12px; font-size: 0.85rem; }
.btn-lg { padding: 14px 28px; font-size: 1rem; }
.btn-icon {
    position: relative; width: 40px; height: 40px; padding: 0;
    background: var(--gray-100); border: none; border-radius: var(--border-radius-sm);
    color: var(--gray-600);
}
.btn-icon:hover { background: var(--gray-200); color: var(--gray-800); }

/* ============================================
   Forms
   ============================================ */
.form-control {
    width: 100%; padding: 12px 16px; border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-sm); font-size: 0.95rem;
    transition: var(--transition); background: var(--white);
}
.form-control:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(220,38,38,0.15); }
.form-control::placeholder { color: var(--gray-400); }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--gray-700); }
.form-group small { display: block; margin-top: 6px; color: var(--gray-500); font-size: 0.8rem; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.form-actions { display: flex; gap: 12px; margin-top: 24px; }
.inline-form { display: flex; gap: 10px; align-items: center; }
.inline-form .form-control { flex: 1; }
textarea.form-control { resize: vertical; min-height: 80px; }

/* Input with button (for dropdowns with create buttons) */
.input-with-button {
    display: flex; gap: 8px; align-items: center;
}
.input-with-button .form-control {
    flex: 1;
}
.input-with-button .btn-icon {
    padding: 12px 16px; width: auto; min-width: 44px; flex-shrink: 0;
}

/* File Upload */
.file-upload-area {
    position: relative; border: 2px dashed var(--gray-300);
    border-radius: var(--border-radius-lg); padding: 30px 20px;
    text-align: center; transition: all 0.2s ease; background: var(--gray-50);
}
.file-upload-area:hover, .file-upload-area.dragover { border-color: var(--primary); background: rgba(220,38,38,0.05); }
.file-upload-area.uploading { pointer-events: none; opacity: 0.7; }
.file-upload-area.has-file { border-color: var(--success); background: rgba(34,197,94,0.05); }
.file-input { position: absolute; width: 100%; height: 100%; top: 0; left: 0; opacity: 0; cursor: pointer; z-index: 2; }
.file-label { display: flex; flex-direction: column; align-items: center; gap: 10px; pointer-events: none; }
.file-label i { font-size: 2.5rem; color: var(--primary); }
.file-text { font-weight: 500; color: var(--gray-700); }
.file-hint { font-size: 0.8rem; color: var(--gray-500); }
.file-preview { margin-top: 15px; display: none; }
.file-preview.show { display: block; }

/* ============================================
   Tables
   ============================================ */
.table-container {
    overflow-x: auto; background: var(--white);
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    border-radius: var(--border-radius-lg); box-shadow: var(--shadow);
}
.data-table { width: 100%; border-collapse: collapse; }
.data-table th, .data-table td { padding: 14px 20px; text-align: left; }
.data-table th {
    background: var(--gray-50); font-weight: 600; color: var(--gray-700);
    font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px;
    border-bottom: 2px solid var(--gray-200);
}
.data-table td { border-bottom: 1px solid var(--gray-100); color: var(--gray-700); }
.data-table tbody tr:hover { background: var(--gray-50); }
.data-table tbody tr:last-child td { border-bottom: none; }
.table-footer {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 20px; background: var(--white);
    border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
}
.showing-info { color: var(--gray-500); font-size: 0.9rem; }
.pagination { display: flex; gap: 8px; }
.pagination button {
    padding: 8px 14px; border: 1px solid var(--gray-200); background: var(--white);
    border-radius: var(--border-radius-sm); color: var(--gray-600); transition: var(--transition);
}
.pagination button:hover:not(:disabled) { background: var(--primary); border-color: var(--primary); color: var(--white); }
.pagination button.active { background: var(--primary); border-color: var(--primary); color: var(--white); }

/* Status Badges */
.status-badge {
    display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px;
    border-radius: 20px; font-size: 0.8rem; font-weight: 600;
}
.status-badge.pending { background: rgba(245,158,11,0.15); color: var(--warning-dark); }
.status-badge.posted, .status-badge.completed, .status-badge.success, .status-badge.healthy, .status-badge.active {
    background: rgba(34,197,94,0.15); color: var(--success-dark);
}
.status-badge.scheduled, .status-badge.running, .status-badge.in-progress, .status-badge.processing {
    background: rgba(220,38,38,0.15); color: var(--primary);
}
.status-badge.failed, .status-badge.error, .status-badge.unhealthy, .status-badge.expired, .status-badge.overdue {
    background: rgba(239,68,68,0.15); color: var(--danger);
}

/* Page Header */
.page-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
.header-actions { display: flex; gap: 12px; align-items: center; }

/* Tabs */
.calendar-tabs {
    display: flex; gap: 8px; margin-bottom: 20px; background: var(--white);
    padding: 8px; border-radius: var(--border-radius); box-shadow: var(--shadow-sm);
}
.tab-btn {
    padding: 10px 20px; border: none; background: transparent;
    border-radius: var(--border-radius-sm); font-weight: 500;
    color: var(--gray-600); transition: var(--transition);
}
.tab-btn:hover { background: var(--gray-100); }
.tab-btn.active { background: var(--primary); color: var(--white); }

/* ============================================
   Workflow Page
   ============================================ */
.workflow-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 24px; }
.workflow-form { padding: 24px; }
.workflow-controls { padding: 24px; }
.control-item {
    padding: 20px; background: var(--gray-50);
    border-radius: var(--border-radius); margin-bottom: 16px;
}
.control-item:last-child { margin-bottom: 0; }
.control-item h4 { font-weight: 600; color: var(--gray-800); margin-bottom: 8px; }
.control-item p { color: var(--gray-500); font-size: 0.9rem; margin-bottom: 14px; }
.workflow-status { padding: 24px; background: var(--gray-50); border-radius: var(--border-radius); min-height: 150px; }

/* ============================================
   Metrics / Expiry Cards
   ============================================ */
.metrics-overview {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 20px; margin-bottom: 30px;
}
.metric-card {
    background: var(--white); border-radius: var(--border-radius-lg);
    padding: 24px; text-align: center; box-shadow: var(--shadow); transition: var(--transition);
}
.metric-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.metric-icon {
    width: 50px; height: 50px; margin: 0 auto 16px;
    background: rgba(220,38,38,0.15); border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.25rem; color: var(--primary);
}
.metric-value { font-size: 1.75rem; font-weight: 700; color: var(--gray-900); }
.metric-label { color: var(--gray-500); font-size: 0.9rem; margin-top: 4px; }

/* ============================================
   Projects Grid (reuses approval card layout)
   ============================================ */
.approvals-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 24px;
}
.project-card {
    background: var(--white); border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow); overflow: hidden; transition: var(--transition);
}
.project-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.project-card-header {
    padding: 20px; border-bottom: 1px solid var(--gray-100);
    display: flex; justify-content: space-between; align-items: flex-start;
}
.project-card-title { font-weight: 600; color: var(--gray-800); margin-bottom: 4px; font-size: 1.1rem; }
.project-card-industry { font-size: 0.85rem; color: var(--gray-500); }
.project-card-body { padding: 20px; }
.project-card-stat {
    display: flex; justify-content: space-between; padding: 8px 0;
    border-bottom: 1px solid var(--gray-100); font-size: 0.9rem;
}
.project-card-stat:last-child { border-bottom: none; }
.project-card-stat .label { color: var(--gray-500); }
.project-card-stat .value { font-weight: 600; color: var(--gray-800); }
.project-card-actions {
    padding: 16px 20px; background: var(--gray-50); display: flex; gap: 12px;
}
.project-card-actions .btn { flex: 1; }

/* Category Breakdown */
.category-item {
    display: flex; align-items: center; gap: 12px; padding: 10px 0;
    border-bottom: 1px solid var(--gray-100);
}
.category-item:last-child { border-bottom: none; }
.category-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.category-name { flex: 1; font-weight: 500; color: var(--gray-700); font-size: 0.9rem; }
.category-count { font-weight: 700; color: var(--gray-900); }

/* ============================================
   Search Results / AI Answer
   ============================================ */
.search-result-item {
    padding: 16px; background: var(--gray-50); border-radius: var(--border-radius);
    margin-bottom: 12px; border-left: 3px solid var(--primary);
}
.search-result-item h4 { font-weight: 600; color: var(--gray-800); margin-bottom: 6px; }
.search-result-item p { font-size: 0.9rem; color: var(--gray-600); line-height: 1.7; }
.search-result-item .score { font-size: 0.8rem; color: var(--gray-400); margin-top: 6px; }
.ai-answer {
    padding: 20px; background: rgba(168,85,247,0.05); border-radius: var(--border-radius);
    border-left: 4px solid #a855f7;
}
.ai-answer p { color: var(--gray-700); line-height: 1.8; }
.ai-answer .sources { margin-top: 12px; font-size: 0.85rem; color: var(--gray-500); }

/* ============================================
   Settings
   ============================================ */
.settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 24px; }
.settings-form { padding: 24px; }
.config-display { padding: 24px; }
.config-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--gray-100); }
.config-item:last-child { border-bottom: none; }
.config-key { font-weight: 500; color: var(--gray-700); }
.config-value { color: var(--gray-900); font-family: monospace; }
.system-info { padding: 24px; }
.info-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--gray-100); }
.info-row:last-child { border-bottom: none; }

/* ============================================
   Empty States
   ============================================ */
.empty-state {
    text-align: center; padding: 60px 20px; background: var(--white);
    border-radius: var(--border-radius-lg); box-shadow: var(--shadow);
}
.empty-state i { font-size: 4rem; color: var(--gray-300); margin-bottom: 20px; }
.empty-state h3 { font-size: 1.25rem; color: var(--gray-700); margin-bottom: 8px; }
.empty-state p { color: var(--gray-500); }

/* ============================================
   Modals
   ============================================ */
.modal {
    position: fixed; inset: 0; display: flex; align-items: center;
    justify-content: center; z-index: 2000; opacity: 0; visibility: hidden;
    transition: var(--transition);
}
.modal.active { opacity: 1; visibility: visible; }
.modal-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
.modal-content {
    position: relative; background: var(--white); border-radius: var(--border-radius-lg);
    width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;
    box-shadow: var(--shadow-xl); transform: translateY(20px); transition: var(--transition);
}
.modal.active .modal-content { transform: translateY(0); }
.modal-content.modal-sm { max-width: 400px; }
.modal-content.modal-lg { max-width: 800px; }
.modal-content.modal-xl { max-width: 1000px; }

/* Document Preview Modal Styles */
.preview-metadata { margin-bottom: 24px; }
.preview-metadata h4, .preview-section h4 { 
    font-size: 0.95rem; font-weight: 600; color: var(--gray-700); 
    margin-bottom: 12px; display: flex; align-items: center; gap: 8px; 
}
.preview-metadata h4 i, .preview-section h4 i { color: var(--primary); }
.preview-meta-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px; background: var(--gray-50); padding: 16px; border-radius: var(--border-radius);
}
.preview-meta-item { display: flex; flex-direction: column; gap: 4px; }
.preview-meta-item .meta-label { font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase; font-weight: 500; }
.preview-meta-item .meta-value { font-size: 0.9rem; color: var(--gray-800); font-weight: 500; }
.preview-meta-item .meta-value.mono { font-family: monospace; font-size: 0.8rem; }
.preview-meta-item .meta-value i { color: var(--gray-500); margin-right: 4px; }
.preview-section { margin-bottom: 20px; }
.preview-summary { 
    background: linear-gradient(135deg, #fdf4ff, #f5f3ff); 
    padding: 16px; border-radius: var(--border-radius); 
    font-size: 0.9rem; line-height: 1.7; color: var(--gray-700);
    border-left: 3px solid #a855f7;
}
.preview-content {
    background: var(--gray-50); padding: 16px; border-radius: var(--border-radius);
    font-size: 0.9rem; line-height: 1.8; color: var(--gray-700);
    max-height: 300px; overflow-y: auto; white-space: pre-wrap; word-wrap: break-word;
    border: 1px solid var(--gray-200);
}
.raw-metadata { margin-top: 12px; }
.raw-metadata summary {
    cursor: pointer; font-size: 0.85rem; color: var(--gray-500); 
    padding: 8px; background: var(--gray-50); border-radius: var(--border-radius-sm);
}
.raw-metadata summary:hover { background: var(--gray-100); }
.raw-metadata pre {
    margin-top: 8px; padding: 12px; background: var(--gray-900); color: #10b981;
    border-radius: var(--border-radius-sm); font-size: 0.75rem; overflow-x: auto;
    max-height: 200px;
}
.score-badge {
    background: linear-gradient(135deg, #10b981, #059669); color: white;
    padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 600;
}

/* Search result actions */
.search-result-actions {
    display: flex; gap: 8px; margin-top: 12px; padding-top: 12px;
    border-top: 1px solid var(--gray-100);
}
.search-result-actions .btn { padding: 6px 12px; font-size: 0.8rem; }

/* AI source actions */
.source-item {
    display: flex; align-items: center; gap: 8px; padding: 6px 0;
}
.source-actions { margin-left: auto; display: flex; gap: 4px; }
.btn-icon-sm {
    width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center;
    border: none; background: var(--gray-100); border-radius: var(--border-radius-sm);
    color: var(--gray-600); font-size: 0.8rem; cursor: pointer; transition: var(--transition);
}
.btn-icon-sm:hover { background: var(--primary); color: white; }
.modal-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px 24px; border-bottom: 1px solid var(--gray-100);
}
.modal-header h3 { font-size: 1.2rem; font-weight: 600; color: var(--gray-900); }
.modal-close {
    width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
    border: none; background: var(--gray-100); border-radius: 50%;
    font-size: 1.25rem; color: var(--gray-500); transition: var(--transition);
}
.modal-close:hover { background: var(--gray-200); color: var(--gray-800); }
.modal-body { padding: 24px; }
.modal-footer {
    display: flex; justify-content: flex-end; gap: 12px; padding: 16px 24px;
    border-top: 1px solid var(--gray-100); background: var(--gray-50);
}

/* ============================================
   Toasts
   ============================================ */
.toast-container {
    position: fixed; top: 20px; right: 20px; z-index: 3000;
    display: flex; flex-direction: column; gap: 12px;
}
.toast {
    display: flex; align-items: center; gap: 12px; padding: 16px 20px;
    background: var(--white); border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg); min-width: 300px; max-width: 450px;
    animation: slideIn var(--transition);
}
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.toast.success { border-left: 4px solid var(--success); }
.toast.error { border-left: 4px solid var(--danger); }
.toast.warning { border-left: 4px solid var(--warning); }
.toast.info { border-left: 4px solid var(--info); }
.toast-icon { font-size: 1.25rem; }
.toast.success .toast-icon { color: var(--success); }
.toast.error .toast-icon { color: var(--danger); }
.toast.warning .toast-icon { color: var(--warning); }
.toast.info .toast-icon { color: var(--info); }
.toast-content { flex: 1; }
.toast-title { font-weight: 600; color: var(--gray-800); margin-bottom: 2px; }
.toast-message { font-size: 0.9rem; color: var(--gray-600); }
.toast-close { background: none; border: none; color: var(--gray-400); font-size: 1.25rem; padding: 4px; }
.toast-close:hover { color: var(--gray-600); }

/* ============================================
   Loading Overlay
   ============================================ */
.loading-overlay {
    position: fixed; inset: 0; background: rgba(255,255,255,0.9);
    display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 4000;
}
.loading-overlay.hidden { display: none; }
.spinner { width: 50px; height: 50px; border: 4px solid var(--gray-200); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-overlay p { margin-top: 16px; color: var(--gray-600); font-weight: 500; }

/* ============================================
   Utilities
   ============================================ */
.hidden { display: none !important; }
.text-muted { color: var(--gray-500); }
.text-success { color: var(--success); }
.text-danger { color: var(--danger); }
.text-warning { color: var(--warning); }
.text-center { text-align: center; }
.mt-4 { margin-top: 24px; }
.mb-4 { margin-bottom: 24px; }
.link { color: var(--primary); font-weight: 500; transition: var(--transition); }
.link:hover { color: var(--primary-dark); text-decoration: underline; }

/* Mobile Menu Button */
.mobile-menu-btn {
    display: none; align-items: center; justify-content: center;
    width: 44px; height: 44px; background: var(--gray-100); border: none;
    border-radius: var(--border-radius-sm); color: var(--gray-700); font-size: 1.3rem;
    cursor: pointer; flex-shrink: 0; transition: var(--transition);
    -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
}
.mobile-menu-btn:hover, .mobile-menu-btn:active { background: var(--gray-200); color: var(--gray-900); }
.sidebar-overlay {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5);
    backdrop-filter: blur(2px); z-index: 999; opacity: 0; transition: opacity var(--transition-slow);
}
.sidebar-overlay.active { display: block; opacity: 1; }

/* ============================================
   Responsive
   ============================================ */
@media (max-width: 1200px) {
    .charts-row { grid-template-columns: 1fr; }
    .workflow-grid { grid-template-columns: 1fr; }
    .activity-section { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
    :root { --sidebar-width: 0; }
    .sidebar { 
        transform: translateX(-100%); width: 280px; z-index: 1000;
        transition: transform 0.3s ease-in-out;
    }
    .sidebar.mobile-open { transform: translateX(0); box-shadow: 4px 0 12px rgba(0,0,0,0.15); }
    .sidebar-toggle { display: none; }
    .main-content { margin-left: 0 !important; }
    .mobile-menu-btn { display: flex; }
    .top-header { padding: 0 12px; height: 60px; gap: 8px; }
    .header-left h1 { font-size: 1.15rem; }
    .breadcrumb { display: none; }
    .search-box { display: none; }
    .header-right { gap: 8px; }
    .user-menu span { display: none; }
    .user-menu { padding: 6px; }
    .page-content { padding: 12px; }
    .stats-grid { grid-template-columns: 1fr 1fr; gap: 12px; }
    .stat-card { padding: 16px; gap: 14px; }
    .stat-icon { width: 48px; height: 48px; font-size: 1.2rem; }
    .stat-info h3 { font-size: 1.4rem; }
    .card-header { padding: 14px 16px; flex-wrap: wrap; gap: 8px; }
    .chart-card { padding: 16px; }
    .health-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
    .activity-section { grid-template-columns: 1fr; gap: 16px; }
    .page-header { flex-direction: column; align-items: stretch; gap: 12px; }
    .header-actions { flex-wrap: wrap; gap: 8px; }
    .calendar-tabs { overflow-x: auto; flex-wrap: nowrap; gap: 4px; padding: 6px; }
    .tab-btn { padding: 10px 16px; font-size: 0.9rem; white-space: nowrap; flex-shrink: 0; min-height: 44px; } /* Better touch target */
    /* Table scrolling for mobile */
    .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .data-table { min-width: 600px; } /* Force horizontal scroll for tables */
    .data-table th, .data-table td { padding: 12px 14px; font-size: 0.85rem; }
    .form-row { grid-template-columns: 1fr; gap: 0; }
    .inline-form { flex-direction: column; align-items: stretch; }
    .workflow-grid { grid-template-columns: 1fr; gap: 16px; }
    .workflow-form, .workflow-controls { padding: 16px; }
    .metrics-overview { grid-template-columns: repeat(2, 1fr); gap: 12px; }
    .approvals-grid { grid-template-columns: 1fr; }
    .settings-grid { grid-template-columns: 1fr; }
    .modal-content { width: 95%; max-height: 85vh; margin: 20px; }
    .modal-footer { flex-direction: column-reverse; gap: 8px; }
    .modal-footer .btn { width: 100%; justify-content: center; min-height: 44px; } /* Better touch target */
    .toast-container { top: auto; bottom: 12px; right: 12px; left: 12px; }
    .toast { min-width: auto; max-width: 100%; }
    /* Better button touch targets */
    .btn { min-height: 44px; padding: 0 20px; }
    .btn-icon { min-width: 44px; min-height: 44px; }
    /* Company selector on mobile */
    #companySelect { font-size: 0.9rem; padding: 8px 12px; }
}
@media (max-width: 480px) {
    .stats-grid { grid-template-columns: 1fr; }
    .metrics-overview { grid-template-columns: 1fr; }
    .health-grid { grid-template-columns: 1fr 1fr; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--gray-100); }
::-webkit-scrollbar-thumb { background: var(--gray-300); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--gray-400); }
::selection { background: rgba(220,38,38,0.3); color: var(--white); }

/* ============================================
   Additional Component Styles (JS-driven)
   ============================================ */

/* Search Results Cards */
.search-result-card {
    padding: 20px; background: var(--white); border-radius: var(--border-radius);
    box-shadow: var(--shadow); margin-bottom: 16px; border-left: 4px solid var(--primary);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.search-result-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.search-result-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.search-result-rank {
    background: var(--primary); color: white; width: 28px; height: 28px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 0.8rem; font-weight: 700; flex-shrink: 0;
}
.search-result-header h4 { flex: 1; font-weight: 600; color: var(--gray-800); margin: 0; }
.search-score { font-size: 0.8rem; color: var(--primary); font-weight: 600; }
.search-result-meta { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
.meta-tag {
    display: inline-flex; align-items: center; gap: 4px;
    font-size: 0.8rem; color: var(--gray-500);
}
.search-snippet { color: var(--gray-600); font-size: 0.9rem; line-height: 1.6; }

/* AI Answer Box */
.ai-answer-box {
    background: rgba(168,85,247,0.05); border-radius: var(--border-radius);
    border-left: 4px solid #a855f7; overflow: hidden;
}
.ai-answer-header {
    padding: 14px 20px; background: rgba(168,85,247,0.1);
    font-weight: 600; color: #7c3aed; display: flex; align-items: center; gap: 8px;
}
.ai-answer-content { padding: 20px; color: var(--gray-700); line-height: 1.8; white-space: pre-wrap; }
.ai-sources { padding: 14px 20px; border-top: 1px solid rgba(168,85,247,0.15); font-size: 0.85rem; color: var(--gray-500); }
.ai-sources ul { margin: 6px 0 0 20px; }
.ai-sources li { margin-bottom: 4px; }

/* Health Card */
.health-card {
    display: flex; align-items: center; gap: 12px; padding: 14px 18px;
    background: var(--gray-50); border-radius: var(--border-radius); border-left: 3px solid var(--gray-300);
}
.health-card.healthy { border-left-color: var(--success); background: rgba(34,197,94,0.05); }
.health-card.unhealthy { border-left-color: var(--danger); background: rgba(239,68,68,0.05); }
.health-card i { font-size: 1.2rem; color: var(--gray-400); }
.health-card.healthy i { color: var(--success); }
.health-card.unhealthy i { color: var(--danger); }
.health-name { flex: 1; font-weight: 500; color: var(--gray-700); }

/* Detail / Result Grids (used in modals and upload result) */
.detail-grid, .result-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
}
.detail-item, .result-item { display: flex; flex-direction: column; gap: 4px; }
.detail-item.full-width, .result-item.full-width { grid-column: 1 / -1; }
.detail-label, .result-label { font-size: 0.8rem; color: var(--gray-500); font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; }
.detail-value, .result-value { font-weight: 500; color: var(--gray-800); }

/* Email Status Card */
.email-status-card { display: flex; flex-direction: column; gap: 12px; }
.email-status-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--gray-100); }
.email-status-row:last-child { border-bottom: none; }

/* Settings Info Grid */
.settings-info-grid { display: flex; flex-direction: column; }

/* Tags List */
.tags-list { display: flex; flex-wrap: wrap; gap: 8px; }
.tag {
    display: inline-block; padding: 6px 14px; background: var(--gray-200);
    color: var(--gray-700); border-radius: 20px; font-size: 0.85rem; font-weight: 500;
}

/* Project Card Footer */
.project-card-footer { padding: 16px 20px; background: var(--gray-50); border-top: 1px solid var(--gray-100); }

/* Project Stat in card */
.project-stat { display: flex; align-items: center; gap: 8px; color: var(--gray-600); font-size: 0.9rem; margin-bottom: 8px; }
.project-stat:last-child { margin-bottom: 0; }
.project-stat i { color: var(--gray-400); width: 16px; }

/* Loading Inline */
.loading-inline { display: flex; align-items: center; justify-content: center; gap: 10px; padding: 30px; color: var(--gray-500); font-size: 0.95rem; }

/* File Preview in upload */
.file-preview { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: var(--gray-50); border-radius: var(--border-radius); }
.file-preview i { font-size: 1.5rem; color: var(--primary); }
.file-preview small { display: block; color: var(--gray-500); font-size: 0.8rem; }

/* Doc Name in table */
.doc-name { display: flex; align-items: center; gap: 8px; }
.doc-name i { color: var(--gray-400); }

/* Action Cell */
.actions-cell { display: flex; gap: 4px; }
.btn-icon { background: none; border: none; padding: 6px 8px; border-radius: var(--border-radius); cursor: pointer; color: var(--gray-500); transition: all 0.2s; }
.btn-icon:hover { background: var(--gray-100); color: var(--primary); }
.btn-icon.danger:hover { background: rgba(239,68,68,0.1); color: var(--danger); }

/* Company Selector */
.company-selector {
    display: flex; align-items: center; gap: 8px;
    padding: 6px 12px; background: var(--gray-100);
    border-radius: var(--border-radius-sm); transition: var(--transition);
}
.company-selector i { color: var(--primary); font-size: 0.9rem; }
.company-select {
    border: none; background: transparent; font-family: inherit;
    font-size: 0.9rem; font-weight: 500; color: var(--gray-700);
    cursor: pointer; outline: none; padding: 2px 4px;
    max-width: 180px;
}
.company-select:focus { outline: none; }
.company-selector:hover { background: var(--gray-200); }

/* Chart Container */
.chart-container { position: relative; min-height: 200px; }

/* Info Label */
.info-label { font-weight: 500; color: var(--gray-500); }

/* Misc utilities */
.mt-4 { margin-top: 24px; }
.text-muted { color: var(--gray-500); }
.text-center { text-align: center; }
.link { color: var(--primary); text-decoration: none; font-weight: 500; font-size: 0.9rem; }
.link:hover { text-decoration: underline; }

/* Table Showing Info */
.table-footer { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; }
.showing-info { font-size: 0.85rem; color: var(--gray-500); }

/* Btn sizes */
.btn-lg { padding: 12px 24px; font-size: 1rem; }
.btn-sm { padding: 6px 12px; font-size: 0.82rem; }
.btn-info { background: var(--info); color: white; border: none; cursor: pointer; padding: 10px 20px; border-radius: var(--border-radius); font-weight: 500; }
.btn-info:hover { opacity: 0.9; }
.btn-success { background: var(--success); color: white; border: none; cursor: pointer; padding: 10px 20px; border-radius: var(--border-radius); font-weight: 500; }
.btn-success:hover { opacity: 0.9; }
